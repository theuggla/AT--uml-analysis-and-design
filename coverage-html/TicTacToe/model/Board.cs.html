<html>
<body style="font-family: sans-serif;">
<div style="white-space: pre;background-color: #EEF4ED;">using System;</div>
<div style="white-space: pre;background-color: #EEF4ED;">using System.Linq;</div>
<div style="white-space: pre;background-color: #EEF4ED;">using System.Collections.Generic;</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">namespace TicTacToe.Model</div>
<div style="white-space: pre;background-color: #EEF4ED;">{</div>
<div style="white-space: pre;background-color: #EEF4ED;">    public enum SquareValue</div>
<div style="white-space: pre;background-color: #EEF4ED;">    {</div>
<div style="white-space: pre;background-color: #EEF4ED;">        A1,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        A2,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        A3,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        B1,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        B2,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        B3,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        C1,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        C2,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        C3</div>
<div style="white-space: pre;background-color: #EEF4ED;">    }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">    public enum PlayerSign</div>
<div style="white-space: pre;background-color: #EEF4ED;">    {</div>
<div style="white-space: pre;background-color: #EEF4ED;">        X,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        O,</div>
<div style="white-space: pre;background-color: #EEF4ED;">        None</div>
<div style="white-space: pre;background-color: #EEF4ED;">    }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">    public class Board</div>
<div style="white-space: pre;background-color: #EEF4ED;">    {</div>
<div style="white-space: pre;background-color: #D2EACE;">        private List&lt;Square&gt; squares = new List&lt;Square&gt;();</div>
<div style="white-space: pre;background-color: #D2EACE;">        private List&lt;int[]&gt; winningRows = new List&lt;int[]&gt;();</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #D2EACE;">        public Board()</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.NewBoard();</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.SetWinningRows();</div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        public virtual List&lt;int[]&gt; WinningRows()</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            return this.winningRows;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        public virtual Square GetSquare(string nameOfSquare)</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            if (Enum.GetNames(typeof(SquareValue)).Contains(nameOfSquare.ToUpper()))</div>
<div style="white-space: pre;background-color: #EEF4ED;">            {</div>
<div style="white-space: pre;background-color: #D2EACE;">                SquareValue squareValue = (SquareValue) Enum.Parse(typeof(SquareValue), nameOfSquare, true);     </div>
<div style="white-space: pre;background-color: #D2EACE;">                return this.squares.Find(x =&gt; x.Name.Equals(squareValue));</div>
<div style="white-space: pre;background-color: #EEF4ED;">            }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #D2EACE;">            throw new NoSuchSquareException(&quot;Tries to retrieve nonexsistent square.&quot;);   </div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        public virtual void NewBoard()</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.squares = new List&lt;Square&gt;();</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #D2EACE;">            foreach (SquareValue squareValue in Enum.GetValues(typeof(SquareValue)))</div>
<div style="white-space: pre;background-color: #EEF4ED;">            {</div>
<div style="white-space: pre;background-color: #D2EACE;">                this.squares.Add(new Square(squareValue));</div>
<div style="white-space: pre;background-color: #EEF4ED;">            }</div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        public virtual IEnumerable&lt;Square&gt; GetBoard()</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            return squares;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        public virtual bool IsEmpty()</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            return !squares.Exists(x =&gt; x.IsPlayedOn());</div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        public virtual bool IsFull()</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            return squares.All(x =&gt; x.IsPlayedOn());</div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">&nbsp;</div>
<div style="white-space: pre;background-color: #EEF4ED;">        public virtual void SetWinningRows()</div>
<div style="white-space: pre;background-color: #EEF4ED;">        {</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {0, 1, 2});</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {3, 4, 5});</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {6, 7, 8});</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {0, 3, 6});</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {1, 4, 7});</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {2, 5, 8});</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {0, 4, 8});</div>
<div style="white-space: pre;background-color: #D2EACE;">            this.winningRows.Add(new int[] {6, 4, 2});</div>
<div style="white-space: pre;background-color: #EEF4ED;">        }</div>
<div style="white-space: pre;background-color: #EEF4ED;">    }</div>
<div style="white-space: pre;background-color: #EEF4ED;">}</div>
</body>
</html>
